import{b as P,u as L,c as A,a as p,j as t,P as E,I as _,_ as i,d as R}from"./index-A_jqfZ-9.js";import"./router-VubLdhT0.js";import{R as C}from"./RotatingLoader-5LhvfwAx.js";import I from"./index-iIEIfBzR.js";import"./reactQuery-U0SXPRnt.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./tailwind-kPGtpyku.js";import"./reactIcons-m3sh1_3a.js";import"./reactLazyLoadImageComponent-DVjwytrh.js";import"./headlessui-PACf4Y4w.js";import"./LoadingButton-qDctieW_.js";import"./useErrorFocusField-J-TSd_tv.js";function Q(){var n,s,o;const{actions:e,state:U}=P({updateAction:R}),{mutateAsync:w,isLoading:v}=L({}),r=A({api:(n=p)==null?void 0:n.isUserAuth,config:{},key:"isUserAuth",options:{enabled:!0}});console.log((o=(s=r==null?void 0:r.data)==null?void 0:s.data[0])==null?void 0:o.is_epramaan);const N=async()=>{var d,m,c,l,u,g,x,f,j,b,h,y;try{const a=await w({api:(d=p)==null?void 0:d.ePramanLogin,data:{type:"mobile"}});(m=a==null?void 0:a.data)!=null&&m.status?(i.success((c=a==null?void 0:a.data)==null?void 0:c.message),e==null||e.updateAction({ePramaan:{codeVerifier:(u=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:u.code_verifier,nonce:(x=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:x.nonce,url:(j=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:j.url}}),window.location.href=(h=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:h.url):(i.error((y=a==null?void 0:a.data)==null?void 0:y.message),e==null||e.updateAction({ePramaan:{codeVerifier:"",nonce:"",url:""}}))}catch(a){i.error("Something went wrong")}};return v||r!=null&&r.isLoading?t.jsx(C,{}):t.jsx(E,{title:"Auth",children:t.jsxs("div",{className:"w-full",children:[t.jsx("div",{children:t.jsx("h2",{className:"font-bold mb-4 text-green-700 text-center",children:"Citizen Login"})}),t.jsx("div",{className:"flex flex-col items-center justify-center ",children:t.jsxs("button",{onClick:N,type:"button",className:"text-gray-700 font-semibold w-full justify-center bg-gray-300 hover:bg-gray-200 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2",children:[t.jsx(_,{src:"/images/epraman.webp",alt:"EPraman",className:"w-6 h-5 me-2 -ms-1"}),"Login with E-Praman"]})}),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-col items-center justify-center mt-4",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-1/3 border-b border-gray-300"}),t.jsx("div",{className:"mx-2 text-gray-500",children:"or"}),t.jsx("div",{className:"w-1/3 border-b border-gray-300"})]})}),t.jsx("div",{children:t.jsx(I,{})})]})]})})}export{Q as default};
