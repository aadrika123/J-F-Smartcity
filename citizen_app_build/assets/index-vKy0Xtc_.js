import{b as _,u as A,c as E,a as v,j as t,P as R,I as C,_ as i,d as I}from"./index-PUba9K_s.js";import"./router-VubLdhT0.js";import{R as U}from"./RotatingLoader-deinP7T-.js";import V from"./index-jtGbuHT-.js";import"./reactQuery-U0SXPRnt.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./tailwind-kPGtpyku.js";import"./reactIcons-m3sh1_3a.js";import"./reactLazyLoadImageComponent-DVjwytrh.js";import"./headlessui-PACf4Y4w.js";import"./LoadingButton-2e3EPz3e.js";import"./useErrorFocusField-J-TSd_tv.js";function X(){var n,s,o,d,m;const{actions:r,state:z}=_({updateAction:I}),{mutateAsync:N,isLoading:P}=A({}),e=E({api:(n=v)==null?void 0:n.isUserAuth,config:{},key:"isUserAuth",options:{enabled:!0}});console.log((o=(s=e==null?void 0:e.data)==null?void 0:s.data[0])==null?void 0:o.is_epramaan);const L=async()=>{var l,c,g,u,x,f,j,b,y,h,p,w;try{const a=await N({api:(l=v)==null?void 0:l.ePramanLogin,data:{type:"mobile"}});(c=a==null?void 0:a.data)!=null&&c.status?(i.success((g=a==null?void 0:a.data)==null?void 0:g.message),r==null||r.updateAction({ePramaan:{codeVerifier:(x=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:x.code_verifier,nonce:(j=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:j.nonce,url:(y=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:y.url}}),window.location.href=(p=(h=a==null?void 0:a.data)==null?void 0:h.data)==null?void 0:p.url):(i.error((w=a==null?void 0:a.data)==null?void 0:w.message),r==null||r.updateAction({ePramaan:{codeVerifier:"",nonce:"",url:""}}))}catch(a){i.error("Something went wrong")}};return P||e!=null&&e.isLoading?t.jsx(U,{}):t.jsx(R,{title:"Auth",children:t.jsxs("div",{className:"w-full",children:[t.jsx("div",{children:t.jsx("h2",{className:"font-bold mb-4 text-green-700 text-center",children:"Citizen Login"})}),t.jsx("div",{className:"flex flex-col items-center justify-center ",children:t.jsxs("button",{onClick:L,type:"button",className:"text-gray-700 font-semibold w-full justify-center bg-gray-300 hover:bg-gray-200 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2",children:[t.jsx(C,{src:"/images/epraman.webp",alt:"EPraman",className:"w-6 h-5 me-2 -ms-1"}),"Login with E-Praman"]})}),((m=(d=e==null?void 0:e.data)==null?void 0:d.data[0])==null?void 0:m.is_epramaan)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-col items-center justify-center mt-4",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-1/3 border-b border-gray-300"}),t.jsx("div",{className:"mx-2 text-gray-500",children:"or"}),t.jsx("div",{className:"w-1/3 border-b border-gray-300"})]})}),t.jsx("div",{children:t.jsx(V,{})})]})]})})}export{X as default};
