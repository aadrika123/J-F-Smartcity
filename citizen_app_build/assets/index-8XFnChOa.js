import{b as _,j as t,P as A,I as E,a as v,_ as i,u as R}from"./index-cssNY1We.js";import"./router-VubLdhT0.js";import{u as C,a as I}from"./useCustomQuery-ntj8AlX6.js";import{R as U}from"./RotatingLoader-OrO4j1qS.js";import V from"./index-8_hJ8hoH.js";import"./reactQuery-RcMcAFyq.js";import"./reactQueryDevtools-6dm9iask.js";import"./axios-YpSsR79r.js";import"./tailwind-kPGtpyku.js";import"./reactIcons-m3sh1_3a.js";import"./reactLazyLoadImageComponent-DVjwytrh.js";import"./headlessui-PACf4Y4w.js";import"./LoadingButton-EzURVUjl.js";import"./useErrorFocusField-J-TSd_tv.js";function Y(){var n,s,o,m,d;const{actions:r,state:z}=_({updateAction:R}),{mutateAsync:N,isLoading:P}=C({}),e=I({api:(n=v)==null?void 0:n.isUserAuth,config:{},key:"isUserAuth",options:{enabled:!0}});console.log((o=(s=e==null?void 0:e.data)==null?void 0:s.data[0])==null?void 0:o.is_epramaan);const L=async()=>{var l,c,u,g,x,f,j,b,p,y,h,w;try{const a=await N({api:(l=v)==null?void 0:l.ePramanLogin,data:{type:"mobile"}});(c=a==null?void 0:a.data)!=null&&c.status?(i.success((u=a==null?void 0:a.data)==null?void 0:u.message),r==null||r.updateAction({ePramaan:{codeVerifier:(x=(g=a==null?void 0:a.data)==null?void 0:g.data)==null?void 0:x.code_verifier,nonce:(j=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:j.nonce,url:(p=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:p.url}}),window.location.href=(h=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:h.url):(i.error((w=a==null?void 0:a.data)==null?void 0:w.message),r==null||r.updateAction({ePramaan:{codeVerifier:"",nonce:"",url:""}}))}catch(a){i.error("Something went wrong")}};return P||e!=null&&e.isLoading?t.jsx(U,{}):t.jsx(A,{title:"Auth",children:t.jsxs("div",{className:"w-full",children:[t.jsx("div",{children:t.jsx("h2",{className:"font-bold mb-4 text-green-700 text-center",children:"Citizen Login"})}),t.jsx("div",{className:"flex flex-col items-center justify-center ",children:t.jsxs("button",{onClick:L,type:"button",className:"text-gray-700 font-semibold w-full justify-center bg-gray-300 hover:bg-gray-200 border border-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 mb-2",children:[t.jsx(E,{src:"/images/epraman.webp",alt:"EPraman",className:"w-6 h-5 me-2 -ms-1"}),"Login with E-Praman"]})}),((d=(m=e==null?void 0:e.data)==null?void 0:m.data[0])==null?void 0:d.is_epramaan)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-col items-center justify-center mt-4",children:t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-1/3 border-b border-gray-300"}),t.jsx("div",{className:"mx-2 text-gray-500",children:"or"}),t.jsx("div",{className:"w-1/3 border-b border-gray-300"})]})}),t.jsx("div",{children:t.jsx(V,{})})]})]})})}export{Y as default};
