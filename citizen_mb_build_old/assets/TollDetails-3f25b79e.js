import{e as O,r as f,u as F,j as e,b as t,M as Z,c as D,d as J,A as K,F as L,Q as w}from"./index-00b86bac.js";import{T as ee}from"./ThemeStyle-994f51bc.js";import{u as ae}from"./formik.esm-d604f56a.js";import{c as te,a as _}from"./index.esm-fa258cf8.js";import{n as g}from"./PowerupFunctions-e77880be.js";import{R as se}from"./RentalApiList-615023eb.js";import{B as re}from"./index.esm-15326ef2.js";import{u as oe,a as ne}from"./useCustomQuery-a49571a9.js";import{C as de}from"./CreateConfirmation-db7b85fb.js";import{O as ce}from"./OverLayLoader-c0f221bf.js";import{R as le}from"./RotatingLoader-79ac9cc9.js";import"./hoist-non-react-statics.cjs-cafd119d.js";import"./ApiHeader2-b363f7b8.js";import"./Hourglass-c2e3dd3e.js";var $={},ie=O&&O.__awaiter||function(o,l,p,n){function x(s){return s instanceof p?s:new p(function(u){u(s)})}return new(p||(p=Promise))(function(s,u){function v(m){try{h(n.next(m))}catch(a){u(a)}}function b(m){try{h(n.throw(m))}catch(a){u(a)}}function h(m){m.done?s(m.value):x(m.value).then(v,b)}h((n=n.apply(o,l||[])).next())})};Object.defineProperty($,"__esModule",{value:!0});const N=f;class me{constructor(l){this.options=l,typeof window<"u"&&(this.rzrpayInstannce=new window.Razorpay(this.options))}on(l,p){this.rzrpayInstannce.on(l,p)}open(){this.rzrpayInstannce.open()}}const pe=()=>{const o="https://checkout.razorpay.com/v1/checkout.js",l=(0,N.useMemo)(()=>typeof window<"u",[]),[p,n]=(0,N.useState)(!1),x=(0,N.useCallback)(()=>!(!l||!("Razorpay"in window)),[]),s=(0,N.useCallback)(u=>{if(l)return new Promise((v,b)=>{const h=document.createElement("script");h.src=u,h.onload=m=>{n(!0),v(m)},h.onerror=m=>b(m),document.body.appendChild(h)})},[]);return(0,N.useEffect)(()=>{x()||ie(void 0,void 0,void 0,function*(){try{yield s(o)}catch(u){throw new Error(u)}})},[]),[me,p]};var ue=$.default=pe;function xe(){const[o]=ue();return{handleRzpPayment:f.useCallback(async p=>{const n={key:"rzp_test_NXHWEn0nSMDcnm",amount:"2000",currency:"INR",name:"Acme Corp",order_id:"order_DaaS6LOUAASb7Y",description:"Test Transaction",image:"https://example.com/your_logo",handler:function(s){alert(s.razorpay_payment_id)},prefill:{name:"Piyush Garg",email:"youremail@example.com",contact:"9999999999"},notes:{address:"Razorpay Corporate Office"},theme:{color:"#3399cc"}},x=new o(n);return x.open(),x},[o])}}function he({tollPaymentListData:o}){var p,n,x;const l=F();return o!=null&&o.isLoading?e("div",{className:"w-full h-32    flex justify-center items-center ",children:e("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):o!=null&&o.error?e("div",{className:"w-full h-32    flex justify-center items-center ",children:t("div",{className:"text-red-500",children:["Error: ",(p=o==null?void 0:o.error)==null?void 0:p.message]})}):e("div",{className:"p-5",children:(x=(n=o==null?void 0:o.data)==null?void 0:n.data)==null?void 0:x.map((s,u)=>t("div",{className:"w-full relative rounded-lg pb-2 mb-4 cursor-pointer shadow-lg ",children:[e("div",{className:"font-semibold bg-[#838FCE] px-4 py-2 text-white rounded-t-lg text-sm",children:"Toll Payment Details"}),e("div",{className:"w-full rounded-lg p-4 space-b-2",children:t("div",{className:"flex flex-row flex-wrap gap-x-4 gap-y-2 w-full",children:[t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Vendor Name."}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.vendor_name})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Amount"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.amount})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"Payment Mode"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.pmt_mode})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"From Date"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.from_date})]}),t("div",{className:"w-full md:w-[40%] grid grid-cols-12",children:[e("div",{className:"col-span-6 text-xs text-gray-600",children:"To Date"}),e("div",{className:"col-span-6 font-semibold text-gray-700 2xl:text-base text-xs",children:s==null?void 0:s.to_date})]})]})}),t("div",{onClick:()=>l(`/toll-payment-receipt/${s==null?void 0:s.id}`),className:"mb-2 mx-4 relative text-white px-2 2xl:px-4 py-[0.3rem] text-xs 2xl:text-sm md:absolute md:bottom-3 2xl:bottom-2 md:right-2 rounded-md bg-indigo-500 border-indigo-400 hover:border-indigo-600 hover:bg-indigo-600 hover:text-white shadow-sm  cursor-pointer poppins md:mt-0 w-max",children:["View Receipt",e(re,{className:"inline font-semibold text-xl"})]})]},u))})}Z.setAppElement("#root");function Te(){var R,S,M;const o=F(),l=oe({}),{handleRzpPayment:p}=xe(),{id:n}=D();console.log("id.....",n);const{api_tollDetailsById:x,api_tollTcPayment:s,api_list_shop_demand:u}=se(),{titleColor:v}=ee(),b=(r,i)=>{w.dismiss(),i=="success"&&w.success(r),i=="error"&&w.error(r)},[h,m]=f.useState(!1),[a,q]=f.useState();f.useState("");const[fe,U]=f.useState(""),[B,V]=f.useState(""),[z,H]=f.useState("");f.useState(!1);const G=ne({api:u,config:{tollId:n},options:{enabled:!!n}}),C=()=>{const r=new Date(B);return`${new Date(z).getDate()-r.getDate()+1}`},d=ae({initialValues:{amount:"",fromDate:"",uptoDate:"",paymentMode:""},validationSchema:te({fromDate:_().required("Required"),uptoDate:_().required("Required"),paymentMode:_().required("Required")}),onSubmit:async(r,{resetForm:i})=>{await de("Are you sure you want to make payment?")?await Y(r,i):console.log("cancelled")}}),P=r=>{console.log("target value",r.target.value),console.log("target value",r.target.name);let i=r.target.name,y=r.target.value;console.log("value to ...",y),i=="ddmmyy"&&U(y),i=="fromDate"&&V(y),i=="uptoDate"&&H(y)},Y=async(r,i)=>{var A,k,I,T,E,j;let y;if(y={tollId:n,dateFrom:r==null?void 0:r.fromDate,dateUpto:r==null?void 0:r.uptoDate,paymentMode:r==null?void 0:r.paymentMode},((A=d.values)==null?void 0:A.paymentMode)=="ONLINE"){alert("Under Development");const c={amount:`${a==null?void 0:a.rate}`*C(),order_id:"order_Ef",handler:X=>{console.log(X)}},W=await p(c);console.log("res",W)}else{const c=await l.mutateAsync({api:s,data:y});(k=c==null?void 0:c.data)!=null&&k.status?(b(c==null?void 0:c.message,"success"),o(`/payment-response?response=${(T=(I=c==null?void 0:c.data)==null?void 0:I.data)==null?void 0:T.tollId}&module=toll&id=${(j=(E=c==null?void 0:c.data)==null?void 0:E.data)==null?void 0:j.tollId}`,{replace:!0}),i()):b(c==null?void 0:c.message,"error")}};f.useEffect(()=>{Q()},[]);const Q=()=>{m(!0);const r={tollId:n};J.post(x,r,K()).then(i=>{i.data.status&&q(i.data.data),m(!1)}).catch(i=>{console.log(i),m(!1)})};return h?e(le,{}):t(L,{children:[(l==null?void 0:l.isLoading)&&e(ce,{}),t("div",{className:"bg-[#eff2f0]",children:[t("div",{className:"col-span-12",children:[" ",e("h1",{className:`font-semibold  ${v} text-xl px-4 py-2 text-gray-600`,children:"Toll Details"})]}),e("div",{className:" flex justify-center items-center  overflow-hidden p-4 ",children:t("div",{className:"  w-full md:w-1/3 rounded-lg bg-[#fdfdfd] shadow-indigo-50 shadow-md",children:[t("div",{className:"bg-[#6c68f0] rounded-lg p-4 text-white",children:[t("p",{className:"text-sm text-center font-semibold ",children:["Toll No. : ",e("span",{children:g(a==null?void 0:a.toll_no)})]}),e("p",{className:"text-center py-1",children:t("span",{className:"text-sm justify-center text-gray-50 flex",children:[e("span",{className:"",children:"Payable Amount : "}),z?t("p",{children:["Rs. ",`${a==null?void 0:a.rate}`*C()]}):t("h1",{children:["Rs. ",a==null?void 0:a.rate]})]})}),t("form",{onSubmit:d.handleSubmit,onChange:P,children:[t("div",{className:"space-x-2 py-1",children:[t("select",{name:"paymentMode",className:"p-1 text-gray-800 border border-gray-300 rounded-sm w-full",onChange:d.handleChange,value:d.values.paymentMode,children:[e("option",{value:"",children:"Select Payment Mode"}),e("option",{value:"CASH",children:"Cash"}),e("option",{value:"ONLINE",children:"Online"})]}),e("span",{className:"text-red-400 text-sm",children:d.touched.paymentMode&&d.errors.paymentMode})]}),t("div",{className:"flex space-x-2 py-1  ",children:[t("div",{className:"w-full",children:[e("p",{className:"capitalize text-xs",children:"date from"}),e("input",{type:"date",name:"fromDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm w-full",onChange:d.handleChange,value:d.values.fromDate,min:(M=(S=(R=a==null?void 0:a.payment_upto)==null?void 0:R.split("-"))==null?void 0:S.reverse())==null?void 0:M.join("-"),max:d.values.uptoDate}),e("span",{className:"text-red-400 text-sm",children:d.touched.fromDate&&d.errors.fromDate})]}),t("div",{className:"w-full",children:[e("p",{className:"capitalize text-xs",children:"date upto"}),e("input",{type:"date",disabled:!d.values.fromDate,name:"uptoDate",className:"px-2 text-gray-800 border border-gray-300 rounded-sm w-full",onChange:d.handleChange,value:d.values.uptoDate,min:d.values.fromDate}),e("span",{className:"text-red-400 text-sm",children:d.touched.uptoDate&&d.errors.uptoDate})]})]}),e("div",{className:"",children:e("button",{type:"submit",className:"bg-amber-500 mt-1 py-2 px-2 rounded-sm capitalize text-xs w-full ",children:"Pay Now"})})]})]}),e("div",{className:"bg-white shadow-lg rounded-lg  w-full mt-4",children:e("div",{children:t("ul",{children:[t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["vendor Name :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.vendor_name)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Address :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.address)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize  border-b shadow-sm",children:["Circle :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.circle_name)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["market :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.market_name)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Rate :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.rate)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Last Payment date :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.last_payment_date)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Last payment amt. :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.last_payment_amount)})]}),t("li",{className:"p-2 px-5 text-sm text-gray-600 font-semibold capitalize border-b shadow-sm ",children:["Payment Upto :",e("span",{className:"px-4 text-sm text-gray-500 uppercase",children:g(a==null?void 0:a.payment_upto)})]})]})})})]})})]}),e(he,{tollPaymentListData:G})]})}export{Te as default};
